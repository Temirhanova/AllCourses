
SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;


CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

CREATE TABLE course (
    id integer NOT NULL,
    moderation_status boolean DEFAULT false,
    name character varying(100),
    description character varying,
    teacher_id integer
);


ALTER TABLE public.course OWNER TO postgres;


CREATE SEQUENCE course_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.course_id_seq OWNER TO postgres;



ALTER SEQUENCE course_id_seq OWNED BY course.id;




CREATE TABLE course_user (
    course_id integer,
    user_id integer
);


ALTER TABLE public.course_user OWNER TO postgres;


CREATE TABLE lesson (
    id integer NOT NULL,
    course_id integer NOT NULL,
    name character NOT NULL,
    content character varying,
    home_work character varying
);


ALTER TABLE public.lesson OWNER TO postgres;

CREATE SEQUENCE lesson_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.lesson_id_seq OWNER TO postgres;



ALTER SEQUENCE lesson_id_seq OWNED BY lesson.id;


--
-- TOC entry 178 (class 1259 OID 251845)
-- Name: user; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE "user" (
    id integer NOT NULL,
    firstname character varying(40),
    secondname character varying(40),
    email character varying(60),
    role integer NOT NULL,
    password character varying(40)
);


ALTER TABLE public."user" OWNER TO postgres;

--
-- TOC entry 177 (class 1259 OID 251843)
-- Name: table_name_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE table_name_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.table_name_id_seq OWNER TO postgres;

--
-- TOC entry 1993 (class 0 OID 0)
-- Dependencies: 177
-- Name: table_name_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE table_name_id_seq OWNED BY "user".id;


--
-- TOC entry 174 (class 1259 OID 251812)
-- Name: teacher; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE teacher (
    id integer NOT NULL,
    user_id integer,
    description character varying,
    phono character varying
);


ALTER TABLE public.teacher OWNER TO postgres;

--
-- TOC entry 173 (class 1259 OID 251810)
-- Name: teacher_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE teacher_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.teacher_id_seq OWNER TO postgres;

--
-- TOC entry 1994 (class 0 OID 0)
-- Dependencies: 173
-- Name: teacher_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE teacher_id_seq OWNED BY teacher.id;


--
-- TOC entry 1848 (class 2604 OID 251803)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY course ALTER COLUMN id SET DEFAULT nextval('course_id_seq'::regclass);


--
-- TOC entry 1851 (class 2604 OID 251826)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY lesson ALTER COLUMN id SET DEFAULT nextval('lesson_id_seq'::regclass);


--
-- TOC entry 1850 (class 2604 OID 251815)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY teacher ALTER COLUMN id SET DEFAULT nextval('teacher_id_seq'::regclass);


--
-- TOC entry 1852 (class 2604 OID 251848)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY "user" ALTER COLUMN id SET DEFAULT nextval('table_name_id_seq'::regclass);


--
-- TOC entry 1975 (class 0 OID 251800)
-- Dependencies: 172
-- Data for Name: course; Type: TABLE DATA; Schema: public; Owner: postgres
--


--
-- TOC entry 1995 (class 0 OID 0)
-- Dependencies: 171
-- Name: course_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('course_id_seq', 1, false);


--
-- TOC entry 1982 (class 0 OID 251856)
-- Dependencies: 179
-- Data for Name: course_user; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 1979 (class 0 OID 251823)
-- Dependencies: 176
-- Data for Name: lesson; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 1996 (class 0 OID 0)
-- Dependencies: 175
-- Name: lesson_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('lesson_id_seq', 1, false);


--
-- TOC entry 1997 (class 0 OID 0)
-- Dependencies: 177
-- Name: table_name_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('table_name_id_seq', 1, false);


--
-- TOC entry 1977 (class 0 OID 251812)
-- Dependencies: 174
-- Data for Name: teacher; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 1998 (class 0 OID 0)
-- Dependencies: 173
-- Name: teacher_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('teacher_id_seq', 1, false);


--
-- TOC entry 1981 (class 0 OID 251845)
-- Dependencies: 178
-- Data for Name: user; Type: TABLE DATA; Schema: public; Owner: postgres
--



--
-- TOC entry 1854 (class 2606 OID 251809)
-- Name: course_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY course
    ADD CONSTRAINT course_pkey PRIMARY KEY (id);


--
-- TOC entry 1859 (class 2606 OID 251831)
-- Name: lesson_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY lesson
    ADD CONSTRAINT lesson_pkey PRIMARY KEY (id);


--
-- TOC entry 1861 (class 2606 OID 251850)
-- Name: table_name_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY "user"
    ADD CONSTRAINT table_name_pkey PRIMARY KEY (id);


--
-- TOC entry 1856 (class 2606 OID 251820)
-- Name: teacher_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT teacher_pkey PRIMARY KEY (id);


--
-- TOC entry 1857 (class 1259 OID 251832)
-- Name: lesson_id_uindex; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX lesson_id_uindex ON lesson USING btree (id);


--
-- TOC entry 1862 (class 2606 OID 251838)
-- Name: course_teacher_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY course
    ADD CONSTRAINT course_teacher_id_fk FOREIGN KEY (teacher_id) REFERENCES teacher(id) ON DELETE CASCADE;


--
-- TOC entry 1866 (class 2606 OID 251864)
-- Name: course_user_course_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY course_user
    ADD CONSTRAINT course_user_course_id_fk FOREIGN KEY (course_id) REFERENCES course(id);


--
-- TOC entry 1865 (class 2606 OID 251859)
-- Name: course_user_user_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY course_user
    ADD CONSTRAINT course_user_user_id_fk FOREIGN KEY (course_id) REFERENCES "user"(id);


--
-- TOC entry 1864 (class 2606 OID 251833)
-- Name: lesson_course_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY lesson
    ADD CONSTRAINT lesson_course_id_fk FOREIGN KEY (course_id) REFERENCES course(id);


--
-- TOC entry 1863 (class 2606 OID 251851)
-- Name: teacher_user_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY teacher
    ADD CONSTRAINT teacher_user_id_fk FOREIGN KEY (user_id) REFERENCES "user"(id);


--
-- TOC entry 1989 (class 0 OID 0)
-- Dependencies: 6
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2018-10-10 16:26:35

--
-- PostgreSQL database dump complete
--

